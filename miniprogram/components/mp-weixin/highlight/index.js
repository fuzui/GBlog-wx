"use strict";function e(e){this.vm=e}var r=require("./prism.min"),s=require("./config"),t=require("../parser");e.prototype.onParse=function(e,a){if("pre"===e.name){var n;for(n=e.children.length;n--&&"code"!==e.children[n].name;);if(-1===n)return;var l=e.children[n],i=l.attrs.class||"";n=i.indexOf("language-"),-1===n&&(i=e.attrs.class||"",n=i.indexOf("language-")),-1===n&&(i="language-text",n=i.indexOf("language-")),n+=9;var c;for(c=n;c<i.length&&" "!==i[c];c++);var h=i.substring(n,c);if(l.children.length&&"text"===l.children[0].type){var g=l.children[0].text.replace(/&amp;/g,"&");if(r.languages[h]&&(l.children=new t(this.vm).parse("<pre>"+r.highlight(g,r.languages[h],h).replace(/token /g,"hl-")+"</pre>")[0].children),e.attrs.class="hl-pre",l.attrs.class="hl-code",s.showLanguageName&&e.children.push({name:"div",attrs:{class:"hl-language",style:"user-select:none"},children:[{type:"text",text:h}]}),s.copyByLongPress&&(e.attrs.style+=(e.attrs.style||"")+";user-select:none",e.attrs["data-content"]=g,a.expose()),s.showLineNumber){for(var p=g.split("\n").length,u=[],o=p;o--;)u.push({name:"span",attrs:{class:"span"}});e.children.push({name:"span",attrs:{class:"line-numbers-rows"},children:u})}}}},module.exports=e;